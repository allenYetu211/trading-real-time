# 量化交易决策辅助平台 - 产品需求文档 (PRD)

- **版本:** 1.0
- **状态:** 初稿
- **日期:** 2025年7月28日

---

## 1. 引言 (Introduction)

### 1.1 背景与问题
在瞬息万变的加密货币市场中，日内交易者面临着巨大的信息处理压力。交易者需要同时监控多个时间周期的图表以判断趋势，手动计算潜在交易的风险回报，并等待精准的入场时机。这个过程不仅耗时、繁琐，而且极易因情绪波动或分析疏忽导致非理性决策，从而错失良机或造成不必要的亏损。

### 1.2 产品愿景
打造一个高度自动化、遵循严格交易纪律的量化决策辅助引擎。本平台旨在将专业交易者的成熟方法论转化为系统化的流程，自动完成市场分析、机会筛选和信号触发，最终为用户提供清晰、量化、可执行的交易决策建议，使其从繁杂的盘面分析中解放出来，专注于执行和复盘。

### 1.3 核心价值
- **自动化 (Automation):** 7x24小时自动监控市场，替代人工盯盘。
- **纪律性 (Discipline):** 严格执行预设的交易规则，排除情绪干扰。
- **高效率 (Efficiency):** 快速从全市场筛选出符合高标准（高盈亏比、趋势一致）的交易机会。

---

## 2. 产品目标 (Product Goals)

- **O1:** **实现交易策略的系统化：** 将“大周期定方向、小周期找入场”的核心思想以及“顺势而为、高盈亏比、右侧入场”的交易原则完全产品化。
- **O2:** **量化交易决策过程：** 提供明确的趋势判断、关键支撑阻力位，并自动计算盈亏比，将模糊的“盘感”转化为精确的数据指标。
- **O3:** **提供可执行的交易信号：** 最终输出的不是繁杂的数据，而是“什么品种、什么方向、在哪个信号触发后、于何处入场、何处止盈止损”的完整交易计划。

---

## 3. 目标用户画像 (User Persona)

- **角色:** 经验丰富的加密货币日内/波段交易者
- **特征:**
  - 具备成熟的技术分析知识体系，深刻理解趋势、支撑阻力、盈亏比的重要性。
  - 以15分钟、1小时为主要操作周期，但决策前必须参考4小时、日线等大周期。
  - 极度重视风险管理和交易纪律，认同“右侧交易”理念。
  - 希望借助工具来固化自己的交易系统，并提升执行效率。

---

## 4. 核心交易逻辑与系统流程

本平台的核心是严格遵循一个四步漏斗模型，对市场机会进行层层筛选。

### 4.1 **第一步：宏观环境分析 (大周期定调)**
- **目的:** 遵循“顺势而为”原则，确定市场的主基调。
- **数据周期:** 日线 (D1), 4小时 (H4)
- **实现方法:**
  - 使用指数移动平均线 `EMA(21)` 和 `EMA(55)`。
  - **上升趋势 (Uptrend):** 当H4和D1图表中，价格均在`EMA(21)`之上，且`EMA(21)`在`EMA(55)`之上。
  - **下降趋势 (Downtrend):** 当H4和D1图表中，价格均在`EMA(21)`之下，且`EMA(21)`在`EMA(55)`之下。
  - **横盘整合 (Ranging):** 其他所有情况。
- **输出:** 明确的 **“市场状态”** 标签。
  - 若为 **上升趋势**，系统只寻找 **做多(Long)** 机会。
  - 若为 **下降趋势**，系统只寻找 **做空(Short)** 机会。
  - 若为 **横盘整合**，系统提示“趋势不明，建议观望”。

### 4.2 **第二步：潜在交易机会筛选 (盈亏比过滤)**
- **目的:** 筛选出具备高价值的“以小博大”的潜在交易。
- **数据周期:** 基于 **D1/H4** 的关键位，在 **15分钟(M15)** 周期上进行计算。
- **实现方法:**
  1.  **确定关键位:** 自动识别并标记D1/H4周期的关键支撑位与阻力位（可通过前期高低点、成交量密集区等方法实现）。
  2.  **计算盈亏比:**
      - **若趋势为多:** 以M15实时价格为入场价，寻找上方最近的D1/H4阻力为止盈位(TP)，下方最近的D1/H4支撑为止损位(SL)。
      - **计算公式:** `盈亏比 = (TP - 入场价) / (入场价 - SL)`
  3.  **过滤:** 只有当计算出的盈亏比 `>= 2.0` (可配置) 时，该交易机会才合格。
- **输出:** 一个 **“值得关注 (Watchlist)”** 的交易机会列表。这些机会满足了方向和赔率两大前提。

### 4.3 **第三步：入场信号确认 (右侧交易触发)**
- **目的:** 遵循“右侧交易”原则，等待市场给出明确的启动信号，避免过早入场。
- **数据周期:** 15分钟 (M15)
- **实现方法:**
  - 对“值得关注”列表中的机会进行实时监控，在M15图表上等待一个确认性的入场信号。
  - **可编程的“明确信号”库 (至少包含):**
    - **信号A (结构突破):** M15价格放量突破并收盘在 **最近一个次级高点** 之上 (做多) 或之下 (做空)。
    - **信号B (回调确认):** M15价格回落至关键支撑位 (如M15的EMA(21))，并出现强烈的 **看涨/看跌吞没K线**。
    - **信号C (形态突破):** M15价格形成短暂的旗形/收敛三角等整理形态后，发生 **有效突破**。
- **输出:** 一个 **“可执行交易信号 (Actionable Signal)”**。这是最终的、最高质量的交易指令。

### 4.4 **第四步：整合与展示**
- **目的:** 将复杂的分析流程，以最直观、简洁的方式呈现给用户。
- **实现方法:** 设计一个信息高度聚合的仪表盘。

---

## 5. 功能需求详述 (Functional Requirements)

### FR-1: 数据模块
- **FR-1.1 数据源:** 仅支持币安(Binance) API。
- **FR-1.2 数据类型:** K线(OHLCV)数据。
- **FR-1.3 数据周期:** 1w, 1d, 4h, 1h, 15m。
- **FR-1.4 数据存储:** 需建立本地数据库缓存API数据，以提升性能。
- **FR-1.5 数据更新:** 15分钟数据更新频率应小于3分钟，其他周期可适当放宽。

### FR-2: 分析引擎模块
- **FR-2.1 趋势分析:** 实现4.1中定义的趋势判断逻辑。
- **FR-2.2 关键位分析:** 实现自动识别D1/H4周期的支撑阻力位。
- **FR-2.3 盈亏比计算:** 实现4.2中定义的盈亏比计算与过滤逻辑。
- **FR-2.4 入场信号识别:** 实现4.3中定义的“明确信号”库，并能够实时监控和触发。

### FR-3: 用户界面(UI)与可视化模块
- **FR-3.1 主仪表盘 (Dashboard):**
  - **区域一：市场状态概览**
    - 以列表或卡片形式展示用户自选的一组交易对。
    - 每个交易对旁需有明确的 **“市场状态”** 标签 (上升趋势/下降趋势/横盘整合)。
  - **区域二：交易信号列表 (Actionable Signals)**
    - 整个平台的核心输出区域。
    - **仅当** 一个交易机会 **同时满足** 4.1, 4.2, 4.3的所有条件后，才会在此显示。
    - 列表的每一行代表一个完整的交易计划，包含列：
      - `交易对`
      - `方向 (Long/Short)`
      - `宏观趋势`
      - `触发信号` (例如: M15结构突破)
      - `建议入场价`
      - `止盈价`
      - `止损价`
      - `盈亏比`
      - `信号时间`
- **FR-3.2 图表交互:**
    - 点击信号列表中的任何一条，可以联动图表，在图上清晰地绘制出入场、止盈、止损线，并高亮显示触发信号的K线。

---

## 6. 非功能需求 (Non-Functional Requirements)

- **性能 (Performance):** 交易信号的计算与推送延迟应小于5秒。
- **可靠性 (Reliability):** 系统需保证99.9%的在线时间，并有API异常处理机制。
- **易用性 (Usability):** 界面简洁，信息层级分明，新手用户也能快速理解信号含义。
- **可配置性 (Configurability):** 用户应可自定义：
  - 盈亏比的过滤阈值 (默认为2.0)。
  - EMA的周期参数。
  - 启用的入场信号类型。

---

## 7. 版本 1.0 范围 (Scope for V1.0)

### 7.1 范围内 (In Scope)
- 完整实现第4节中定义的四步交易逻辑。
- 仅支持币安现货交易对。
- 提供核心的仪表盘和信号展示界面。
- 用户可手动配置基本的策略参数。

### 7.2 范围外 (Out of Scope)
- **自动交易执行:** 不连接交易所API进行自动下单。
- **历史回测系统:** 不提供对策略的历史回测功能。
- **高级警报系统:** 不提供邮件、短信、App推送等警报方式。
- **更复杂的量化模型:** 不包含机器学习、统计套利等模型。

---

## 8. 未来路线图 (Future Roadmap)

- **V1.1:** 增加策略历史回测功能，允许用户验证和优化参数。
- **V1.2:** 集成Telegram Bot，实现交易信号的实时推送。
- **V1.3:** 扩展支持币安合约交易对。
- **V2.0:** 引入更多维度的分析指标（如资金费率、持仓量等），并考虑支持更多交易所。
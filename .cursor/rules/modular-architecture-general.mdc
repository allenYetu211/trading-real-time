# æ¨¡å—åŒ–æ¶æ„å’Œé‡æ„é€šç”¨è§„èŒƒ

## ğŸ¯ æ ¸å¿ƒé‡æ„åŸåˆ™

### 1. æ–‡ä»¶å¤§å°é™åˆ¶
- **å•ä¸ªæ–‡ä»¶ä¸è¶…è¿‡ 500 è¡Œ** - è¶…è¿‡æ—¶å¿…é¡»æ‹†åˆ†
- **ç±»/æœåŠ¡ä¸è¶…è¿‡ 400 è¡Œ** - ä¼˜å…ˆæŒ‰åŠŸèƒ½æ‹†åˆ†
- **å·¥å…·ç±»æ–‡ä»¶ä¸è¶…è¿‡ 300 è¡Œ** - ä¿æŒå·¥å…·ç±»ç²¾ç®€

### 2. å•ä¸€èŒè´£åŸåˆ™ (SRP)
```typescript
// âœ… æ­£ç¡®ï¼šä¸“é—¨çš„æ ¼å¼åŒ–å™¨
export class MessageFormatter {
  static formatPrice(price: number): string { ... }
  static formatTime(): string { ... }
}

// âœ… æ­£ç¡®ï¼šä¸“é—¨çš„åˆ†æå¤„ç†å™¨
export class AnalysisProcessor {
  static async performAnalysis(): Promise<string> { ... }
}

// âŒ é”™è¯¯ï¼šæ··åˆå¤šç§èŒè´£
export class MixedService {
  formatMessage() { ... }      // æ ¼å¼åŒ–
  performAnalysis() { ... }    // åˆ†æ
  sendNotification() { ... }   // é€šçŸ¥
}
```

### 3. ä¾èµ–å€’ç½®åŸåˆ™ (DIP)
```typescript
// âœ… æ­£ç¡®ï¼šé€šè¿‡å‚æ•°ä¼ å…¥ä¾èµ–
static async processData(
  dataService: DataService,
  symbol: string
): Promise<Result> {
  return await dataService.getData(symbol);
}

// âŒ é”™è¯¯ï¼šç›´æ¥ä¾èµ–å…·ä½“å®ç°
static async processData(symbol: string): Promise<Result> {
  const dataService = new ConcreteDataService(); // ç¡¬ä¾èµ–
  return await dataService.getData(symbol);
}
```

## ğŸ“ æ ‡å‡†ç›®å½•ç»“æ„æ¨¡å¼

### 1. åŠŸèƒ½æ¨¡å—æ ‡å‡†ç»“æ„
```
src/modules/[module-name]/
â”œâ”€â”€ services/           # ä¸šåŠ¡é€»è¾‘æœåŠ¡
â”œâ”€â”€ controllers/        # APIæ§åˆ¶å™¨
â”œâ”€â”€ dto/               # æ•°æ®ä¼ è¾“å¯¹è±¡
â”œâ”€â”€ entities/          # æ•°æ®å®ä½“
â”œâ”€â”€ interfaces/        # æ¥å£å®šä¹‰
â”œâ”€â”€ utils/             # å·¥å…·åŒ… (æ ¸å¿ƒé‡æ„åŒºåŸŸ)
â”‚   â”œâ”€â”€ interfaces/    # ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ formatters/    # æ ¼å¼åŒ–å™¨
â”‚   â”œâ”€â”€ templates/     # æ¨¡æ¿
â”‚   â”œâ”€â”€ processors/    # å¤„ç†å™¨
â”‚   â”œâ”€â”€ validators/    # éªŒè¯å™¨
â”‚   â”œâ”€â”€ index.ts       # ç»Ÿä¸€å¯¼å‡º
â”‚   â””â”€â”€ README.md      # ä½¿ç”¨æ–‡æ¡£
â”œâ”€â”€ [module].module.ts # æ¨¡å—å®šä¹‰
â””â”€â”€ README.md          # æ¨¡å—æ–‡æ¡£
```

### 2. Utilså·¥å…·åŒ…ç»„ç»‡è§„èŒƒ
```typescript
// utils/index.ts - ç»Ÿä¸€å¯¼å‡ºå…¥å£
export * from './interfaces';
export * from './formatters';
export * from './templates';
export * from './processors';
export * from './validators';

// ä½¿ç”¨æ—¶ç»Ÿä¸€ä»utilså¯¼å…¥
import { 
  SomeFormatter, 
  SomeProcessor, 
  SomeInterface 
} from '../utils';
```

## ğŸ”§ å·¥å…·ç±»è®¾è®¡è§„èŒƒ

### 1. é™æ€å·¥å…·ç±»æ¨¡å¼
```typescript
/**
 * é™æ€å·¥å…·ç±»æ¨¡æ¿
 * - æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯é™æ€çš„
 * - ä¸ä½¿ç”¨ä¾èµ–æ³¨å…¥
 * - é€šè¿‡å‚æ•°ä¼ å…¥æ‰€æœ‰ä¾èµ–
 */
export class UtilityClass {
  private static readonly logger = new Logger(UtilityClass.name);

  /**
   * æ ¸å¿ƒæ–¹æ³•æ¨¡æ¿
   */
  static async performOperation(
    dependency: SomeService,
    input: InputType
  ): Promise<OutputType> {
    try {
      this.logger.log(`å¼€å§‹æ‰§è¡Œæ“ä½œ: ${input}`);
      const result = await dependency.process(input);
      this.logger.log(`æ“ä½œå®Œæˆ: ${input}`);
      return result;
    } catch (error) {
      this.logger.error(`æ“ä½œå¤±è´¥: ${error.message}`);
      throw new Error(`æ“ä½œå¤±è´¥: ${error.message}`);
    }
  }
}
```

### 2. æ ¼å¼åŒ–å™¨æ¨¡å¼
```typescript
// ä¸“é—¨çš„æ ¼å¼åŒ–å™¨ï¼ŒèŒè´£å•ä¸€
export class DataFormatter {
  static formatPrice(price: number): string { ... }
  static formatDate(date: Date): string { ... }
  static formatPercentage(value: number): string { ... }
}

// ç‰¹å®šä¸šåŠ¡çš„æ ¼å¼åŒ–å™¨
export class AnalysisFormatter {
  static formatAnalysisResult(data: AnalysisData): string { ... }
  static formatRecommendation(rec: Recommendation): string { ... }
}
```

### 3. å¤„ç†å™¨æ¨¡å¼
```typescript
// ä¸“é—¨çš„ä¸šåŠ¡å¤„ç†å™¨
export class BusinessProcessor {
  static async processBusinessLogic(
    coreService: CoreService,
    input: InputData
  ): Promise<ProcessedData> {
    // å¤„ç†é€»è¾‘
  }
  
  static validateInput(input: InputData): boolean { ... }
  static transformOutput(data: RawData): ProcessedData { ... }
}
```

## ğŸ“ ä»£ç è´¨é‡æ ‡å‡†

### 1. TypeScript ä¸¥æ ¼ç±»å‹
```typescript
// âœ… æ­£ç¡®ï¼šæ˜ç¡®çš„ç±»å‹å®šä¹‰
interface AnalysisRequest {
  symbol: string;
  timeframe: TimeframeType;
  analysisType: AnalysisType;
}

// âœ… æ­£ç¡®ï¼šæ³›å‹ä½¿ç”¨
static async processData<T, R>(
  processor: (input: T) => Promise<R>,
  data: T[]
): Promise<R[]> { ... }

// âŒ é”™è¯¯ï¼šè¿‡åº¦ä½¿ç”¨any
static async processData(processor: any, data: any): Promise<any> { ... }
```

### 2. é”™è¯¯å¤„ç†æ ‡å‡†
```typescript
// âœ… æ­£ç¡®ï¼šæ ‡å‡†é”™è¯¯å¤„ç†æ¨¡å¼
static async reliableOperation(input: InputType): Promise<OutputType> {
  try {
    // è¾“å…¥éªŒè¯
    if (!this.validateInput(input)) {
      throw new Error('è¾“å…¥å‚æ•°æ— æ•ˆ');
    }

    // æ ¸å¿ƒé€»è¾‘
    const result = await this.performCoreLogic(input);
    
    // ç»“æœéªŒè¯
    if (!this.validateOutput(result)) {
      throw new Error('è¾“å‡ºç»“æœæ— æ•ˆ');
    }

    return result;
  } catch (error) {
    this.logger.error(`æ“ä½œå¤±è´¥: ${error.message}`, error.stack);
    throw new Error(`æ“ä½œå¤±è´¥: ${error.message}`);
  }
}
```

### 3. æ—¥å¿—è®°å½•è§„èŒƒ
```typescript
export class SomeProcessor {
  private static readonly logger = new Logger(SomeProcessor.name);

  static async performTask(input: string): Promise<string> {
    // å¼€å§‹æ—¥å¿—
    this.logger.log(`å¼€å§‹æ‰§è¡Œä»»åŠ¡: ${input}`);
    
    try {
      const result = await this.processInput(input);
      
      // æˆåŠŸæ—¥å¿—
      this.logger.log(`ä»»åŠ¡å®Œæˆ: ${input} -> ${result}`);
      return result;
    } catch (error) {
      // é”™è¯¯æ—¥å¿—
      this.logger.error(`ä»»åŠ¡å¤±è´¥ ${input}: ${error.message}`);
      throw error;
    }
  }
}
```

## ğŸš€ é‡æ„å®æ–½æµç¨‹

### 1. åˆ†æé˜¶æ®µ
- [ ] è¯†åˆ«è¶…å¤§æ–‡ä»¶ (>500è¡Œ)
- [ ] åˆ†æåŠŸèƒ½èŒè´£è¾¹ç•Œ
- [ ] ç¡®å®šæ‹†åˆ†ç­–ç•¥
- [ ] è®¾è®¡å·¥å…·åŒ…ç»“æ„

### 2. è®¾è®¡é˜¶æ®µ
- [ ] åˆ›å»ºæ¥å£å’Œç±»å‹å®šä¹‰
- [ ] è®¾è®¡å·¥å…·ç±»API
- [ ] è§„åˆ’ä¾èµ–å…³ç³»
- [ ] åˆ¶å®šè¿ç§»è®¡åˆ’

### 3. å®æ–½é˜¶æ®µ
- [ ] åˆ›å»ºutilsç›®å½•ç»“æ„
- [ ] é€æ­¥æŠ½ç¦»åŠŸèƒ½æ¨¡å—
- [ ] ä¿æŒAPIå…¼å®¹æ€§
- [ ] ç¼–å†™å•å…ƒæµ‹è¯•

### 4. éªŒè¯é˜¶æ®µ
- [ ] åŠŸèƒ½æµ‹è¯•é€šè¿‡
- [ ] ç¼–è¯‘æ— é”™è¯¯
- [ ] æ€§èƒ½æ— å›é€€
- [ ] æ–‡æ¡£æ›´æ–°å®Œæ•´

## ğŸ“š æ–‡æ¡£åŒ–è¦æ±‚

### 1. å·¥å…·ç±»æ–‡æ¡£æ¨¡æ¿
```typescript
/**
 * [å·¥å…·ç±»åç§°]
 * [ç®€è¦åŠŸèƒ½æè¿°]
 * 
 * @example
 * ```typescript
 * const result = await UtilClass.method(param1, param2);
 * console.log(result);
 * ```
 */
export class UtilClass {
  /**
   * [æ–¹æ³•åŠŸèƒ½æè¿°]
   * 
   * @param param1 å‚æ•°1è¯´æ˜
   * @param param2 å‚æ•°2è¯´æ˜
   * @returns è¿”å›å€¼è¯´æ˜
   * @throws å¼‚å¸¸æƒ…å†µè¯´æ˜
   */
  static async method(param1: Type1, param2: Type2): Promise<ReturnType> { ... }
}
```

### 2. READMEæ›´æ–°è¦æ±‚
- æ·»åŠ æ–°å·¥å…·ç±»æ—¶å¿…é¡»æ›´æ–°README
- åŒ…å«å®Œæ•´çš„ä½¿ç”¨ç¤ºä¾‹
- è¯´æ˜ä¾èµ–å…³ç³»å’Œæ‰©å±•æ–¹æ³•
- æä¾›æ•…éšœæ’é™¤æŒ‡å—

## âš ï¸ é‡æ„åæ¨¡å¼ï¼ˆç¦æ­¢ï¼‰

1. **ä¸Šå¸ç±»** - å•ä¸ªç±»æ‰¿æ‹…è¿‡å¤šèŒè´£
2. **ç¡¬ç¼–ç ä¾èµ–** - åœ¨å·¥å…·ç±»ä¸­ç›´æ¥newå®ä¾‹
3. **æ··åˆæŠ½è±¡å±‚çº§** - åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­æ··åˆé«˜ä½å±‚é€»è¾‘
4. **å¾ªç¯ä¾èµ–** - å·¥å…·ç±»ä¹‹é—´ç›¸äº’ä¾èµ–
5. **é…ç½®æ•£ä¹±** - é…ç½®å’Œå¸¸é‡æ•£å¸ƒåœ¨å„ä¸ªæ–‡ä»¶ä¸­

å‚è€ƒæˆåŠŸé‡æ„æ¡ˆä¾‹ï¼š[Telegram Boté‡æ„](mdc:src/modules/telegram-ccxt-analysis/utils/README.md)
description:
globs:
alwaysApply: false
---
